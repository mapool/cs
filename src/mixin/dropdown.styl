/**
 * @file Dropdown
 * @author musicode
 */

dropdown-size(size)

    > {$selector-text},
    > {$selector-button},
    > {$selector-dropdown-menu} > {$selector-dropdown-menu-item}
        ui-set('font-size', size['font'])
        ui-set('line-height', size['line-height'])


    > {$selector-text}
        ui-set('padding-left', size['padding-horizontal'])
        ui-set('padding-right', size['padding-horizontal'])


    > {$selector-button},
    > {$selector-dropdown-menu} > {$selector-dropdown-menu-item}
        ui-set('padding', size['padding-vertical'] size['padding-horizontal'])


    > {$selector-text},
    > {$selector-button}
        > {$selector-icon}
            ui-set('line-height', size['line-height'])
            ui-set('margin-left', size['margin-horizontal'])


    &{$selector-radius}
        > {$selector-button},
        > {$selector-dropdown-menu}
            ui-set('border-radius', size['radius'])


ui-dropdown()

    display inline-block
    position relative

    ui()

    ui-size-variant(
        each: dropdown-size
    )

    > {$selector-text},
    > {$selector-button}
        text-align left
        ui-fluid()

        > {$selector-icon}
            float right


    > {$selector-text}
        > {$selector-icon}
            user-select none
            if $support-mouse
                ui-set('cursor', $cursor-clickable)


ui-dropdowns()

    ui-collection(
        selector-item: $selector-dropdown,
        each: @(size) {
            > {$selector-dropdown} {
                dropdown-size(size)
            }
        }
    )

ui-dropdown-menu()

    display none
    text-align left
    overflow-x hidden
    overflow-y auto

    position absolute
    left 0
    right 0

    ui()
    ui-set('background-color', $brand-bg)
    ui-set('max-height', $dropdown-menu-max-height)
    ui-set('box-shadow', $dropdown-menu-box-shadow)
    ui-set('z-index', $zindex-tiny)

    if $brand-border is a 'rgba'
        border 1px solid $brand-border


ui-dropdown-menu-item()

    if $support-mouse
        ui-set('cursor', $cursor-clickable)

    display block
    user-select none
    margin 0

    ui()

    if $brand-divider is a 'rgba'
        + {$selector-dropdown-menu-item}
            border-top 1px solid $brand-divider

    ui-transition('background-color')

    {$selector-hover}
        ui-set('background-color', $brand-bg-hover)

    {$selector-active}
        ui-set('background-color', $brand-bg-active)

    {$selector-checked}
        ui-set('background-color', $brand-bg-checked)

    {$selector-disabled}
        ui-set('background-color', $brand-bg-disabled)
        ui-set('color', $brand-text-disabled)

        if $support-mouse
            ui-set('cursor', $cursor-disabled)


ui-dropdown-opened-button()

    ui-brand-variant(
        reversed: true,
        each: @(bg, color) {
            button-active(
                bg: bg,
                border: darken(bg, $button-border-darken),
                color: color
            )
        }
    )


ui-dropdown-opened-menu()

    display block

