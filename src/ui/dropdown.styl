/**
 * @file Dropdown
 * @author musicode
 */

@import '../variable/dropdown.styl'
@import '../mixin/dropdown.styl'

+prefix-classes($ui-prefix)

    {$selector-dropdown}

        display inline-block
        position relative

        ui()

        ui-size-variant(
            each: dropdown-size
        )


        > {$selector-text},
        > {$selector-button}

            text-align left

            ui-fluid()

            > {$selector-icon}

                float right
                user-select none

                ui()

                if $support-mouse
                    ui-set('cursor', $cursor-clickable)




        > {$selector-text}

            ui-brand-variant(
                each: @(color) {
                    > {$selector-icon} {
                        ui-set('color', color)
                    }
                }
            )




        > {$selector-button}

            ui-brand-variant(
                reversed: true,
                each: @(color) {
                    > {$selector-icon} {
                        ui-set('color', color)
                    }
                }
            )




        > {$selector-dropdown-menu}

            display none
            text-align left
            overflow-x hidden
            overflow-y auto

            position absolute
            left 0
            right 0

            ui()
            ui-set('margin-top', $dropdown-menu-gap)
            ui-set('background-color', $dropdown-menu-bg)
            ui-set('max-height', $dropdown-menu-max-height)
            ui-set('z-index', $zindex-tiny)


            if $dropdown-menu-border is a 'rgba'
                border 1px solid $dropdown-menu-border




            > {$selector-dropdown-menu-item}

                display block
                user-select none

                ui()

                if $support-mouse
                    ui-set('cursor', $cursor-clickable)

                {$selector-hover}
                    ui-set('background-color', $dropdown-menu-item-bg-hover)

                {$selector-active}
                    ui-set('background-color', $dropdown-menu-item-bg-active)

                {$selector-checked}
                    ui-set('background-color', $dropdown-menu-item-bg-checked)


        > ul{$selector-dropdown-menu}
            list-unstyled()


        &{$selector-opened}

            > {$selector-button}
                ui-brand-variant(
                    reversed: true,
                    each: @(bg, border, color) {
                        ui-active(bg, border, color, '')
                    }
                )

            > {$selector-dropdown-menu}
                display block


    {$selector-dropdowns}

        ui-collection(
            each: @(size) {


                > {$selector-dropdown} {
                    dropdown-size(size)

                    + {$selector-dropdown} {
                        ui-set('margin-left', size['margin-horizontal'])
                    }

                }

            }
        )

