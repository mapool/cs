/**
 * @file Form
 * @author musicode
 */

form()



form-input()

    selector-input = 'input&,> input'
    selector-textarea = 'textarea&,> textarea'

    selector-control = selector-input + ',' + selector-textarea
    selector-wrapper = 'div&,span&,label&'

    {selector-textarea}
        resize none

    {selector-wrapper}
        display inline-block

    ui()

    ui-size-variant(
        each: @(size, name) {
            {selector-control} {
                ui-set('font-size', size['font'])
                ui-set('line-height', size['line-height'])
                ui-set('padding', size['padding-vertical'] size['padding-horizontal'])
            }
            {selector-input} {
                ui-set('height', $form-input-size-hash[name]['height'])
            }
            {selector-wrapper} {
                > {$selector-label},
                > {$selector-button},
                > {$selector-form-placeholder} {
                    ui-set('font-size', size['font'])
                    ui-set('line-height', size['line-height'])
                    ui-set('padding', size['padding-vertical'] size['padding-horizontal'])
                }

                > {$selector-icon} {
                    ui-set('font-size', size['font'])
                    ui-set('line-height', size['line-height'])
                }

                // icon 在左边
                > {$selector-icon} {
                    left 0
                    ui-set('top', size['padding-vertical'])
                }

                > input + {$selector-icon} {
                    left auto
                    right 0
                }

                > {$selector-icon} {
                    position absolute
                }

                > {$selector-label} + input,
                > {$selector-button} + input {
                    border-left 0
                    border-top-left-radius 0
                    border-bottom-left-radius 0
                }
                > input + {$selector-label},
                > input + {$selector-button} {
                    margin-left -1px
                }
            }
        }
    )

    {selector-control}

        outline 0
        margin 0

        background-color $form-input-bg
        border 1px solid $form-input-border

        if $form-placeholder-color is a 'rgba'

            &::-webkit-input-placeholder
                color $form-placeholder-color

            &:-moz-placeholder
                color $form-placeholder-color

            &::-moz-placeholder
                color $form-placeholder-color

            &:-ms-input-placeholder
                color $form-placeholder-color

    {selector-wrapper}

        position relative
        font-size 0

        > {$selector-icon}
            position absolute

        {selector-control}
            vertical-align top

        if $form-placeholder-color is a 'rgba'

            > {$selector-form-placeholder}

                position absolute
                left 1px
                top 1px

                user-select none
                ui-set('color', $form-placeholder-color)


    {$selector-hover}
        {selector-control}
            ui-hover(border: $form-input-border, selector: '')

    {selector-control}
        {$selector-focus}
            ui-focus(border: $form-input-border, selector: '')

    ui-brand-variant(
        reversed: true,
        each: @(bg, border, color) {

            {selector-wrapper} {
                > {$selector-label},
                > {$selector-button} {
                    ui-style(bg, border, color)
                }
            }

            {$selector-hover} {
                {selector-control} {
                    ui-hover(border: lighten(bg, 50%), selector: '')
                }
            }

            {selector-control} {
                {$selector-focus} {
                    ui-focus(border: lighten(bg, 40%), selector: '')
                }
            }

        }
    )

